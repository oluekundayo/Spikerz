<div class="p-4 bg-gray-50">
  <h1 class="text-2xl font-semibold text-green-600 mb-8">Lorem Ipsum Dolor Sit</h1>

  <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    <p-card class="p-card-shadow h-full">
      <p-table
        [value]="assets()"
        [paginator]="true"
        [rows]="rows"
        [totalRecords]="totalRecords"
        (onPage)="onPageChange($event)"
      >
        <ng-template #header>
          <tr>
            <th class="w-2/3 text-[#858D9D] text-xs">Asset</th>
            <th class="w-1/3 text-[#858D9D] text-xs">Contextual Risk</th>
          </tr>
        </ng-template>

        <ng-template #body let-asset>
          <tr class="gap-1.5">
            <td class="flex items-center space-x-1">
              <img src="images/server.svg" class="w-10 h-10" alt="" />
              <div>
                <p class="font-medium text-xs text-gray-800">{{ asset.name }}</p>
                <p class="text-[.6rem] text-gray-500">{{ asset.ip }}</p>
              </div>
            </td>
            <td>
              <p-tag [value]="asset.risk" [severity]="getSeverity(asset.risk)"></p-tag>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="paginatorleft" let-state>
          <div class="flex items-center justify-center w-full text-sm text-gray-600">
            <span
              >Showing {{ state.first + 1 }}-{{
                state.first + state.rows > state.totalRecords
                  ? state.totalRecords
                  : state.first + state.rows
              }}
              of {{ state.totalRecords }}</span
            >
          </div>
        </ng-template>
      </p-table>
    </p-card>

    <p-card
      header="Contextual Risk"
      class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center w-full"
    >
      <!-- LEFT: Risk Summary -->
      <div class="space-y-2 text-sm font-medium">
        @for (riskLevel of ['Critical', 'High', 'Medium', 'Low']; track riskLevel) {
        <div class="flex items-center space-x-3 w-fit">
          <span
            class="w-3 h-3 rounded-full"
            [ngClass]="{
              'bg-red-600': riskLevel === 'Critical',
              'bg-orange-400': riskLevel === 'High',
              'bg-yellow-400': riskLevel === 'Medium',
              'bg-green-500': riskLevel === 'Low'
            }"
          ></span>

          <span class="text-gray-600 w-fit">{{ riskLevel }}</span>

          <span class="text-gray-800 font-semibold">
            {{ riskSummary()[riskLevel] }}
          </span>
        </div>
        }
      </div>

      <!-- RIGHT: Donut Chart -->
      <div class="flex justify-center items-center">
        <div
          class="donut-chart relative w-40 h-40 sm:w-48 sm:h-48 md:w-56 md:h-56"
          [style.background]="conicGradientValue()"
        >
          <div
            class="donut-hole absolute inset-4 sm:inset-5 md:inset-6 bg-white rounded-full flex items-center justify-center"
          >
            <div class="data text-center">
              <span class="text-2xl sm:text-3xl font-bold">
                {{ assets().length }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>
